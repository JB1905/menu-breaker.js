"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),MenuBreaker=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.element=t,this.settings=this.settings(i),this.firstClick=!1,this.overlay(),this.changeMenu(),this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){var e=this;window.addEventListener("resize",function(){return e.onWindowResize()})}},{key:"onWindowResize",value:function(){this.changeMenu()}},{key:"overlay",value:function(){!0===this.settings.overlay.show&&(this.overlay=document.createElement("div"),this.overlay.classList.add("overlay"),document.body.appendChild(this.overlay),Object.assign(this.overlay.style,{top:"0px",transition:this.settings.overlay.transition,cursor:this.settings.overlay.cursor,width:"100%",height:"100%",position:"fixed",display:"none",opacity:0,"background-color":this.settings.overlay["background-color"]}))}},{key:"subLevels",value:function(){this.listEl=this.element.querySelectorAll(":not(li) > ul > li > ul");for(var e=0;e<this.listEl.length;e++){var t=this.listEl[e].parentNode.clientWidth,i=this.listEl[e].clientWidth;this.listEl[e].parentNode.offsetLeft+i>this.windowWidth?this.listEl[e].style.marginLeft=-i+t+"px":this.listEl[e].style.marginLeft="0px",this.subListEl=this.listEl[e].querySelectorAll("li > ul");for(var s=0;s<this.subListEl.length;s++){var n=this.subListEl[s].offsetWidth;this.subListEl[s].parentNode.parentNode.parentNode.offsetLeft+n+i>this.windowWidth?this.subListEl[s].style.marginLeft=-n+"px":this.subListEl[s].style.marginLeft=n+"px"}}}},{key:"menuButton",value:function(){var e=this;this.openButton.addEventListener("click",function(){!1===e.firstClick?(e.mobileMenu.classList.add("open"),e.overlay.style.opacity=e.settings.overlay.opacity,e.overlay.style.display="block",e.firstClick=!0):(e.mobileMenu.classList.remove("open"),e.overlay.style.opacity=0,e.firstClick=!1)})}},{key:"overlayClose",value:function(){var e=this;this.overlay.addEventListener("click",function(){e.mobileMenu.classList.remove("open"),e.overlay.style.opacity=0,e.firstClick=!1})}},{key:"mobile",value:function(){this.openButton.style.display="block",this.element.style.opacity=0,this.element.style.visibility="hidden",this.mobileMenu.classList.contains("open")&&(this.mobileMenu.style.display="block",this.overlay.style.display="block"),this.menuButton(),this.overlayClose()}},{key:"desktop",value:function(){this.mobileMenu.classList.contains("open")&&(this.mobileMenu.style.display="none",this.overlay.style.display="none"),this.openButton.style.display="none",this.element.style.opacity=1,this.element.style.visibility="visible",this.subLevels()}},{key:"changeMenu",value:function(){this.windowWidth=window.innerWidth,this.checkSize=this.element.offsetHeight,this.mobileMenu=document.querySelector("[data-mobile]"),this.openButton=document.querySelector("[data-open]"),this.closeButton=document.querySelector("[data-close]"),this.checkSize>this.settings["navbar-height"]?this.mobile():this.desktop()}},{key:"settings",value:function(e){var t={overlay:{show:!0,opacity:.5,cursor:"pointer",transition:"all 300ms ease","background-color":"#000"},"navbar-height":70},i={};for(var s in t)i[s]=s in e?e[s]:t[s];return i}}]),e}();if(window.jQuery){var $=window.jQuery;$.fn.MenuBreaker=function(e){new MenuBreaker(this[0],e)}}