/*!
* menu-breaker.js v1.0
* Copyright 2017 Jakub Biesiada
* MIT License
*/
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),MenuBreaker=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,e),this.element=t,this.settings=this.settings(i),this.update(),this.addEventListeners()}return _createClass(e,[{key:"addEventListeners",value:function(){this.onWindowResizeBind=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResizeBind)}},{key:"onWindowResize",value:function(){this.update()}},{key:"openMobileMenu",value:function(){!1===this.firstClick?(this.mobileMenu.classList.add("open"),this.overlay.style.opacity=1,this.overlay.style.display="block",this.firstClick=!0):(this.mobileMenu.classList.remove("open"),this.overlay.style.opacity=0,this.firstClick=!1)}},{key:"closeMobileMenu",value:function(){this.mobileMenu.classList.remove("open"),this.overlay.style.opacity=0,this.firstClick=!1}},{key:"update",value:function(){var e=window.innerWidth;this.checkSize=this.element.offsetHeight,this.mobileMenu=document.querySelector(this.settings["mobile-menu"]),this.openCloseButton=document.querySelector(this.settings["open-close-button"]),this.overlay=document.querySelector(this.settings.overlay),this.checkSize>this.settings["navbar-height"]?(this.firstClick=!1,this.openCloseButton.style.display="block",this.element.style.opacity=0,this.element.style.visibility="hidden",this.mobileMenu.classList.contains("open")&&(this.mobileMenu.style.display="block",this.overlay.style.display="block"),this.mobileMenuBind=this.openMobileMenu.bind(this),this.openCloseButton.addEventListener("click",this.mobileMenuBind),this.closeMobileMenuBind=this.closeMobileMenu.bind(this),this.overlay.addEventListener("click",this.closeMobileMenuBind)):(this.mobileMenu.classList.contains("open")&&(this.mobileMenu.style.display="none",this.overlay.style.display="none"),this.openCloseButton.style.display="none",this.element.style.opacity=1,this.element.style.visibility="visible"),this.listEl=elem.querySelectorAll(":not(li) > ul > li > ul");for(var t=0;t<this.listEl.length;t++){var i=this.listEl[t].parentNode.clientWidth,s=this.listEl[t].clientWidth;this.listEl[t].parentNode.offsetLeft+s>e?this.listEl[t].style.marginLeft=-s+i+"px":this.listEl[t].style.marginLeft="0px",this.subListEl=this.listEl[t].querySelectorAll("li > ul");for(var n=0;n<this.subListEl.length;n++){var l=this.subListEl[n].offsetWidth;this.subListEl[n].parentNode.parentNode.parentNode.offsetLeft+l+s>e?this.subListEl[n].style.marginLeft=-l+"px":this.subListEl[n].style.marginLeft=l+"px"}}}},{key:"settings",value:function(e){var t={"mobile-menu":".mobile","open-close-button":"#openMenu",overlay:".overlay","navbar-height":70},i={};for(var s in t)if(s in e)i[s]=e[s];else if(this.element.getAttribute("data-"+s)){var n=this.element.getAttribute("data-"+s);try{i[s]=JSON.parse(n)}catch(e){i[s]=n}}else i[s]=t[s];return i}}]),e}();if(window.jQuery){var $=window.jQuery;$.fn.MenuBreaker=function(e){new MenuBreaker(this[0],e)}}